<!DOCTYPE html>
<html>
<head>
	<title>Tienda Virtual</title>
	<link rel="stylesheet" type="text/css" href="style.css">
	<script src="https://kit.fontawesome.com/8c04bf8fa3.js" crossorigin="anonymous"></script>
	
	<link rel="apple-touch-icon" sizes="180x180" href="icono/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="icono/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="icono/favicon-16x16.png">
	<link rel="manifest" href="icono/site.webmanifest">

</head>
<body>

	<header>
		<h1>Tienda Virtual</h1>
		<nav>
			<ul>
				<li><a href="Index.html"> Inicio</a></li>
				<li><a href="Notebook.html">Notebook</a></li>
				<li><a href="celulares.html">Celulares</a></li>
				<li><a href="audios.html">Audios</a></li>
				<li><a href="videojuegos.html">VideoJuegos</a></li>
				<li class="sesion"><a href="login.html">Ingresar</a></li>
			</ul>
			<div class="contenedor-icono-carrito">
				<div class="carrito-icono">
					<a href="carrito.html"><i class="fa-solid fa-cart-shopping fa-xl"></i></a>
				</div>
			</div>

		</nav>
	</header>
	<main>
		<div id="productos-en-carrito">
			<!-- Lista de productos desde localStorage -->
		</div>

		<p id="total-pagar"></p>
		<div id="contenedor-boton">
			<button class="boton-comprar">Comprar ahora</button>
		</div>
		
	</main>
	<footer>
		<h2><a href="contacto.html">Contactenos</a></h2>
		<ul>
			<li><a href="Index.html"> Inicio</a></li>
			<li><a href="Notebook.html">Notebook</a></li>
			<li><a href="celulares.html">Celulares</a></li>
			<li><a href="audios.html">Audios</a></li>
			<li><a href="videojuegos.html">VideoJuegos</a></li>
		</ul>
		<p>Derechos Reservados © Tienda Virtual 2023</p>
	</footer>
	<script>
		window.addEventListener("DOMContentLoaded", () => {
			const carritoProductos = localStorage.getItem("carritoProductos");

			if (carritoProductos) {
				const productos = JSON.parse(carritoProductos);
				const listaProductos = document.getElementById("productos-en-carrito");

				productos.forEach((producto) => {
					const listItem = document.createElement("li");
                    listItem.classList.add("producto-lista");
					listItem.innerHTML = `

				<span>(${producto.cantidad})</span>
				<span>${producto.nombre}</span>
				<span>      ${producto.precio}</span>
				`;

					listaProductos.appendChild(listItem);
				});

				let totalPagar = 0;
				productos.forEach((producto) => {
					totalPagar += producto.cantidad * parseFloat(producto.precio.slice(1));
				});

				const totalPagarElement = document.getElementById("total-pagar");
                totalPagarElement.classList.add('total-carrito');
				totalPagarElement.textContent = `Total a pagar: $${totalPagar.toFixed(2)}`;

			}

            const btnComprar = document.querySelector('.boton-comprar');

            // Agregar evento de clic al botón
            btnComprar.addEventListener('click', () => {
                // Vaciar el carrito (eliminar los datos del localStorage)
                localStorage.removeItem('carritoProductos');

                // Mostrar el mensaje de compra exitosa
                alert('¡Compra exitosa!');

                // Redireccionar a la página de inicio (u otra página deseada)
                window.location.href = 'Index.html';
            })
            
		});
	</script>

	<script src="Script1.js"></script>
</body>
</html>