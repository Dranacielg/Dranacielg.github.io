<!DOCTYPE html>
<html>
<head>
	<title>Tienda Virtual</title>
	<link rel="stylesheet" type="text/css" href="style.css">
	<script src="https://kit.fontawesome.com/8c04bf8fa3.js" crossorigin="anonymous"></script>
	
	<link rel="apple-touch-icon" sizes="180x180" href="icono/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="icono/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="icono/favicon-16x16.png">
	<link rel="manifest" href="icono/site.webmanifest">

</head>
<body>

	<header>
		<h1>Tienda Virtual</h1>
		<nav>
			<ul>
				<li><a href="Index.html"> Inicio</a></li>
				<li><a href="Notebook.html">Notebook</a></li>
				<li><a href="celulares.html">Celulares</a></li>
				<li><a href="audios.html">Audios</a></li>
				<li><a href="videojuegos.html">VideoJuegos</a></li>
				<li class="sesion"><a href="login.html">Ingresar</a></li>
			</ul>
			<div class="contenedor-icono-carrito">
				<div class="carrito-icono">
				<a href="carrito.html"><i class="fa-solid fa-cart-shopping fa-xl"></i></a>
				</div>
			</div>
				
		</nav>
	</header>
	<main>
		<div id="carrito">
			<!-- Contenedor principal -->
			<h2>Carrito</h2>
			<ul id="lista-productos"></ul>
		
			<span id="total-cost"></span>
			<button type="submit" class="btn">Comprar ahora</button>
			<input type="hidden" name="item_name" value="" />
			<input type="hidden" name="item_price" value="" />
			<input type="hidden" name="item_quantity" value="" />
			<span id="total-pagar"></span>
		</div>
          
	</main>
	<footer>
		<h2><a href="contacto.html">Contactenos</a></h2>
		<ul>
			<li><a href="Index.html"> Inicio</a></li>
			<li><a href="Notebook.html">Notebook</a></li>
			<li><a href="celulares.html">Celulares</a></li>
			<li><a href="audios.html">Audios</a></li>
			<li><a href="videojuegos.html">VideoJuegos</a></li>
		</ul>
		<p>Derechos Reservados © Tienda Virtual 2023</p>
	</footer>
	<script>
		// Obtener los datos del carrito almacenados en el localStorage
		const carritoProductos = localStorage.getItem('carritoProductos');
	  
		// Verificar si existen datos en el carrito
		if (carritoProductos) {
		  // Convertir los datos en formato JSON a un objeto JavaScript
		  const productos = JSON.parse(carritoProductos);
	  
		  // Seleccionar el contenedor donde se mostrarán los productos
		  const listaProductos = document.getElementById('lista-productos');
	  
		  // Recorrer los productos y crear los elementos para mostrarlos en la página
		  productos.forEach(producto => {
			// Crear un elemento de lista <li>
			const listItem = document.createElement('li');
	  
			// Crear el contenido HTML del elemento de lista con los datos del producto
			listItem.innerHTML = `
			  <span>${producto.nombre}</span>
			  <span>${producto.cantidad}</span>
			  <span>${producto.precio}</span>
			`;
	  
			// Agregar el elemento de lista al contenedor
			listaProductos.appendChild(listItem);
		  });
		   // Calcular el valor total
		   let totalPagar = 0;
		  productos.forEach(producto => {
			totalPagar += producto.cantidad * parseFloat(producto.precio.slice(1));
		  });
	  
		  // Seleccionar el elemento donde se mostrará el total a pagar
		  const totalPagarElement = document.getElementById('total-pagar');
	  
		  // Actualizar el contenido del elemento con el valor total
		  totalPagarElement.textContent = `Total a pagar: $${totalPagar.toFixed(2)}`;
		}
		// Obtener referencia al botón "Comprar ahora"
		const btnComprar = document.querySelector('.btn');

		// Agregar evento de clic al botón
		btnComprar.addEventListener('click', () => {
		// Vaciar el carrito (eliminar los datos del localStorage)
		localStorage.removeItem('carritoProductos');

		// Mostrar el mensaje de compra exitosa
		alert('¡Compra exitosa! Gracias por su compra.');

		// Redireccionar a la página de inicio (u otra página deseada)
		window.location.href = 'Index.html';
		});
	  </script>
	  
	  
</body>
</html>