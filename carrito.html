<!DOCTYPE html>
<html>
<head>
	<title>Tienda Virtual</title>
	<link rel="stylesheet" type="text/css" href="style.css">
	
	<link rel="apple-touch-icon" sizes="180x180" href="icono/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="icono/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="icono/favicon-16x16.png">
	<link rel="manifest" href="icono/site.webmanifest">

</head>
<body>

	<header>
		<h1><a href="index.html">Tienda Virtual</a></h1>
		<nav>
			<ul>
				<li><a href="index.html"> Inicio</a></li>
				<li><a href="notebook.html">Notebook</a></li>
				<li><a href="celulares.html">Celulares</a></li>
				<li><a href="audios.html">Audios</a></li>
				<li><a href="videojuegos.html">VideoJuegos</a></li>
				<li class="sesion"><a href="login.html">Ingresar</a></li>
			</ul>
			<div class="contenedor-icono-carrito">
				<div class="contenedor-icono-carrito2">
					<svg xmlns="http://www.w3.org/2000/svg"
						 fill="none" viewBox="0 0 24 24" stroke-width="1.5"
						 stroke="currentColor" class="icono-carrito">
						<path stroke-linecap="round" stroke-linejoin="round"
							  d="M2.25 3h1.386c.51 0 .955.343 1.087.835l.383
						  1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c1.121-2.3
						  2.1-4.684 2.924-7.138a60.114 60.114 0 00-16.536-1.84M7.5
						  14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75
						  0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z" />
					</svg>


					<div class="contar-productos">
						<span id="contador-productos">0</span>
					</div>
				</div>

			</div>


		</nav>
	</header>
	<main id="main-carrito">
		<div id="productos-en-carrito">
			<!-- Lista de productos desde localStorage -->
		</div>

		<p id="total-pagar"></p>
		<div id="contenedor-boton">
			<button class="boton-comprar">Comprar ahora</button>
		</div>
		
	</main>
	<footer id="footer-carrito">
		<h2><a href="contacto.html">Contactenos</a></h2>
		<ul>
			<li><a href="index.html"> Inicio</a></li>
			<li><a href="notebook.html">Notebook</a></li>
			<li><a href="celulares.html">Celulares</a></li>
			<li><a href="audios.html">Audios</a></li>
			<li><a href="videojuegos.html">VideoJuegos</a></li>
		</ul>
		<p>Derechos Reservados © Tienda Virtual 2023</p>
	</footer>
	<script>
		window.addEventListener("DOMContentLoaded", () => {
			const carritoProductos = localStorage.getItem("carritoProductos");

			if (carritoProductos) {
				const productos = JSON.parse(carritoProductos);
				const listaProductos = document.getElementById("productos-en-carrito");

				productos.forEach((producto) => {
					const listItem = document.createElement("li");
                    listItem.classList.add("producto-lista");
					listItem.innerHTML = `

				<span class="span-cantidad"">(${producto.cantidad})</span>
				<span>${producto.nombre}</span>
				<span class="span-precio">${producto.precio}</span>
				`;

					listaProductos.appendChild(listItem);
				});

				let totalPagar = 0;
				productos.forEach((producto) => {
					totalPagar += producto.cantidad * parseFloat(producto.precio.slice(1));
				});

				const totalPagarElement = document.getElementById("total-pagar");
                totalPagarElement.classList.add('total-carrito');
				totalPagarElement.textContent = `Total a pagar: $${totalPagar.toFixed(2)}`;

			}

            const btnComprar = document.querySelector('.boton-comprar');

            // Agregar evento de clic al botón
            btnComprar.addEventListener('click', () => {
                // Vaciar el carrito (eliminar los datos del localStorage)
                localStorage.removeItem('carritoProductos');

                // Mostrar el mensaje de compra exitosa
                alert('¡Compra exitosa!');

                // Redireccionar a la página de inicio (u otra página deseada)
                window.location.href = 'index.html';
            })
            
		});
	</script>

	<script src="Script1.js"></script>
</body>
</html>
